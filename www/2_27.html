<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <title>APP ABC</title>
        <link rel="stylesheet" href="assets/plugins/jquery-mobile/jquery.mobile-1.4.5.min.css" />
        <!-- Bootstrap -->
        <link href="assets/plugins/bootstrap-3.3.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="assets/css/style.css?q=1ss1" rel="stylesheet" type="text/css" />
                
    </head>
    <body>
    <div data-role="page" id="page1">

    </div>

    <!-- Header -->
    <header id="top" class="header">
        <div class="text-vertical-center row">
            <div class="row">
                <div class="win-title">MUY BIEN</div>
                <!--<div class="win-subtitle">+ <span id="points">0</span>  PUNTOS</div>-->
            </div>    
            <div class="row">
                <div class="col-xs-5 space-parrot win-parrot">
                    <img class="img-responsive" src="assets/img/win-parrot-abc.png">
                </div>
                <div class="col-xs-6 space-button text-left">
                    <div class="row">
                        <div class="win-content-title">TIENES:</div>
                        <div class="win-content-subtitle "><span id="total-points">0</span> PUNTOS</div>
                        <div class="win-content-message" id="message">
                            Mision completada 
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>  
                        </div>
                    </div>
                </div>
                
                <div class="row ranking">
                    <div id="ranking-top-5">
                        <div id="myModal" style="display:none; border:0px solid red">
                            <!---->
                            <div class="form-inline">
                              <div class="form-group">    
                                <div class="input-group-lg">
                                  <input type="text" class="form-control " placeholder="Nombre" id="nombreUser">
                                  <button type="submit" class="btn btn-warning btn-lg" id="btnGuardarNombre" >Guardar</button>
                                </div>
                                  <div id="nombreUserMessage" class="warning text-message-loser"></div>
                              </div>
                            </div>
                        </div>                    
                    </div>                
                </div>                
            </div>
            
        </div>
    </header>
    <script type="text/javascript" src="assets/plugins/jquery/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-mobile/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>     
    <!--app--> 
    <script type="text/javascript" src="assets/js/plugins/uri/URI.js"></script>
    <script type="text/javascript" src="assets/js/html5sql.js"></script>
    <script type="text/javascript" src="assets/js/applicationModelSql.js"></script>
    <script type="text/javascript">
    /*+++++++++++++++++ ADD CUSTOM +++++++++++++*/
    /*      background force to jquery-mobile  */
    document.getElementById('page1').style.backgroundColor = "#83e749";
    document.body.style.backgroundColor = "#83e749";

    $( window ).on( "orientationchange", function( event ) {
        setTimeout(function(){
            $.mobile.loading('show');
        },100);

        $( "header" ).fadeOut( 1, function() {
            setTimeout(function(){
                $( "header" ).fadeIn();
                $.mobile.loading('hide');
            },2000);
        });
    });
    /*+++++++++++++++++ ADD CUSTOM +++++++++++++*/
    
    var URI = new URI(location.href)
        URI.data = {};
        
    URI.data = URI.search(true);
        console.log('DATA' , URI.data);
    var myIndice = parseInt(URI.data.indice) || 0;
    var myPoints = parseInt(URI.data.points) || 0;
    var myTotalPoints = parseInt(URI.data.totalPoints) || 0;
    var myLevel = parseInt(URI.data.level) || 1;
    
    $(document).ready(function(){
        //$('#points').text(URI.data.points);
        $('#total-points').text(URI.data.totalPoints);
        
        var messageHtml = '';
        if ((27*10) === myTotalPoints) {
            $('#myModal').show();
            sessionStorage.setItem("level2", true);
            messageHtml = '<a href="index.html" data-role="button" rel="external">'
            + '<img class="img-responsive" src="assets/img/next-blue.png">'
            + '</a>';                
        } else {
            sessionStorage.setItem("level2", false);
            messageHtml = '<span class="text-message-purple">Fallaste! no completaste todo el abecedario correctamente, puedes volver a intentarlo.</span>'
            + '<a href="2_0.html?level=2" data-role="button" rel="external">'
            + '<img class="img-responsive" src="assets/img/return.png">'
            + '</a>';
        }
        
        $('#message').html(messageHtml);
    });
    
    
    </script>
    <script type="text/javascript" src="assets/js/1_27.js"></script>
   
    <script type="text/javascript">
        // 02 SCRIP FOR RANKING
        var appModel = new applicationModel();
        appModel.initDatabase();
        //appModel.showRecords(URI.data.level);
        
        $('#btnGuardarNombre').click(function() {
            var nombre = $('#nombreUser').val();
            if (nombre != '' && (27*10) === myTotalPoints ) {
                // ADD USER
                addUserRegister(URI.data, appModel, nombre);
                // ADD USER  
                appModel.showRecords(URI.data.level);
                $('#nombreUser').val('');
                
            } else {
                $('#nombreUserMessage').text('Ingrese su Nombre');
            }
        });        
    </script>
</body>
</html>
